<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>

    <?php include "../include/head.php" ?>
</head>
<body>
    <?php include "../include/skip.php" ?>
    <!-- //skip -->

    <?php include "../include/header.php" ?>
    <!-- //header -->

    <div class="modal1">
        <div class="modal__inner1">
            <h1 class="mt50 mb30">이용 약관 동의</h1>
            <div class="modal__wrap1">
                <p>하루 한 지문문 통합서비스 약관<br><br>
                    제 1장 총칙<br><br>
                    제1조 (목적)
                    이 약관은 하루 한 지문(이하 “회사”라 합니다)이 모바일 기기를 통해 제공하는 서비스 및 이에 부수하는 네트워크, 웹사이트, 기타 서비스<br>
                    (이하 “서비스”라 합니다)의 이용에 대한 회사와 서비스 이용자의 권리ㆍ의무 및 책임사항, 기타 필요한 사항을 규정함을 목적으로 합니다.<br><br>
                    제2조 (용어의 정의) <br><br>
                    ① 이 약관에서 사용하는 용어의 정의는 다음과 같습니다.<br><br>
                    “회사”라 함은 모바일 기기를 통하여 서비스를 제공하는 사업자를 의미합니다.<br>
                    “회원”이란 이 약관에 따라 이용계약을 체결하고, 회사가 제공하는 서비스를 이용하는 자를 의미합니다.<br>
                    “임시회원”이란 일부 정보만 제공하고 회사가 제공하는 서비스의 일부만 이용하는 자를 의미합니다.<br>
                    “모바일 기기”란 콘텐츠를 다운로드 받거나 설치하여 사용할 수 있는 기기로서, 휴대폰, 스마트폰, 휴대정보단말기(PDA), 태블릿 등을 의미합니다.<br>
                    “계정정보”란 회원의 회원번호와 외부계정정보, 기기정보, 별명, 프로필 사진, 친구목록 등 회원이 회사에 제공한 정보와 서비스 이용정보,<br>
                    이용요금 결제 정보 등을 통칭합니다.<br>
                    “콘텐츠”란 모바일 기기로 이용할 수 있도록 회사가 서비스 제공과 관련하여 디지털 방식으로 제작한 유료 또는 무료의 내용물<br>
                    일체(애플리케이션, 네트워크 서비스 등)를 의미합니다.<br>
                    “오픈마켓”이란 모바일 기기에서 콘텐츠를 설치하고 결제할 수 있도록 구축된 전자상거래 환경을 의미합니다.<br>
                    “애플리케이션”이란 회사가 제공하는 서비스를 이용하기 위하여 모바일 기기를 통해 다운로드 받거나 설치하여 사용하는 프로그램 일체를 의미합니다.<br>
                    ② 이 약관에서 사용하는 용어의 정의는 본 조 제1항에서 정하는 것을 제외하고는 관계법령 및 서비스별 정책에서 정하는 바에 의하며, 이에 정하지 아니한 것은<br>
                    일반적인 상 관례에 따릅니다.<br><br>
                    제3조 (회사정보 등의 제공)<br><br>
                    회사는 다음 각 호의 사항을 회원이 알아보기 쉽도록 서비스 내에 표시합니다. 다만, 개인정보처리방침과 약관은 회원이 연결화면을 통하<br>
                    볼 수 있도록 할 수 있습니다.<br><br>
                    상호 및 대표자의 성명<br>
                    영업소 소재지 주소(회원의 불만을 처리할 수 있는 곳의 주소를 포함한다)<br>
                    전화번호, 전자우편주소<br>
                    사업자 등록번호<br>
                    통신판매업 신고번호<br>
                    개인정보처리방침<br>
                    서비스 이용약관<br>
                </p>
            </div>
            <button class="modal__close1 modalBtn">닫기</button>
        </div>
    </div>
    <!-- modal1 -->
    <div class="modal2">
        <div class="modal__inner2">
            <h1 class="mt50 mb30">개인 정보 처리 방침</h1>
            <div class="modal__wrap2">
                <p>하루 한 지문 개인정보처리방침<br>
                    하루 한 지문은 다음과 같이 개인정보처리방침을 수립하고 공개합니다.<br><br><br><br>
                    1. 개인정보처리목적<br><br><br>
                    제1조 (목적)<br>
                    회사는 이용자의 개인정보를 다음 목적 이외 용도로 사용하지 않습니다.<br><br><br>
                    이용자에게 서비스를 제공하기 위한 목적<br><br>
                    이용자 문의에 응답하고 이용자의 요청을 이행하기 위한 목적<br><br>
                    서비스에 관한 정보, 이용약관 및 정책 변경 사항과 같은 정보를 이용자에게 고지하기 위한 목적<br><br>
                    법적 절차에 따라 이용자의 권리를 보호하기 위한 목적으로 필요하다고 판단되는 조치(정부 기관의 요청 등)를 시행하기 위한 목적<br><br>
                    이용자의 개인정보 보호 환경을 구축하거나 서비스를 개선하기 위한 목적<br><br><br>
                    2. 타사 광고 금지<br><br>
                    아이들이 어떠한 방해 없이 학습에 집중할 수 있도록 회사가 개발한 앱 서비스에는 타사 광고를 싣지 않습니다. 회사가 개발한 앱 서비스는 교사,<br>
                    언어치료전문가, 아동교육전문가가 기획하고 검토한 콘텐츠들로 구성되어있습니다.<br><br><br>
                    3. 데이터 판매 금지<br><br>
                    회사는 다음 각 호의 사항을 회원이 알아보기 쉽도록 서비스 내에 표시합니다. 다만, 개인정보처리방침과 약관은 회원이 연결화면을 통하여<br>
                    볼 수 있도록 할 수 있습니다.<br><br>
                    상호 및 대표자의 성명<br>
                    영업소 소재지 주소(회원의 불만을 처리할 수 있는 곳의 주소를 포함한다)<br>
                    전화번호, 전자우편주소<br>
                    사업자 등록번호<br>
                    통신판매업 신고번호<br>
                    개인정보처리방침<br>
                    서비스 이용약관<br>
                </p>
            </div>
            <button class="modal__close2 modalBtn">닫기</button>
        </div>
    </div>
    <!-- modal2 -->
    <main id="main" class="mint">
        <div class="join__inner container">
            <h2>하루 한 지문<br><span>회원가입</span></h2>
            <p class="mt20">회원가입을 통해 하루 한 지문의 다양한 정보들과<br>혜택들을 받아가세요!</p>
            <div class="join__form">
                <form action="joinEnd.php" name="joinEnd" method="post" onsubmit="return joinChecks()">
                    <fieldset>
                        <legend class="blind">회원가입 영역</legend>
                        <div class="over">
                            <label for="youId" class="required">아이디</label>
                            <input type="text" id="youId" name="youId" class="inputStyle3" placeholder="아이디를 적어주세요!" required>
                            <a href="#c" class="youCheck" onclick="idChecking()">아이디 중복 확인</a>
                            <p class="msg" id="youIdComment"><!--아이디가 이미 존재합니다.--></p>
                        </div>
                        <div>
                            <label for="youName" class="required mt30">이름</label>
                            <input type="text" id="youName" name="youName" class="inputStyle2" placeholder="이름을 적어주세요!" required>
                        </div>
                        <div>
                            <label for="youPass" class="required mt40">비밀번호</label>
                            <input type="password" id="youPass" name="youPass" class="inputStyle2" placeholder="비밀번호를 적어주세요!" required>
                            <p class="msg" id="youPassCComment"><!--비밀번호는 특수문자, 숫자가 들어가야 합니다.--></p>
                        </div>
                        <div>
                            <label for="youPassC" class="required mt30">비밀번호 확인</label>
                            <input type="password" id="youPassC" name="youPassC" class="inputStyle2" placeholder="다시 한 번 비밀번호를 적어주세요!" required>
                            <p class="msg" id="youPassComment"><!--비밀번호가 일치하지 않습니다.--></p>
                        </div>
                        <div class="over">
                            <label for="youEmail" class="required mt30">이메일</label>
                            <input type="email" id="youEmail" name="youEmail" class="inputStyle3" placeholder="이메일을 적어주세요!" required>
                            <a href="#c" class="youCheck" onclick="emailChecking()">이메일 중복 확인</a>
                            <p class="msg" id="youEmailComment"><!--이메일이 이미 존재합니다.--></p>
                        </div>
                        <div class="over">
                            <label for="youNick" class="required mt30">닉네임</label>
                            <input type="text" id="youNick" name="youNick" class="inputStyle3" placeholder="닉네임을 적어주세요!" required>
                            <a href="#c" class="youCheck" onclick="nickChecking()">닉네임 중복 확인</a>
                            <p class="msg" id="youNickComment"><!--닉네임이 이미 존재합니다.--></p>
                        </div>
                        <div style="display: flex; justify-content: space-between;" class="mt30">
                            <div style="width:70%">
                                <label for="youPhone">연락처</label>
                                <input type="text" id="youPhone" name="youPhone" class="inputStyle3" placeholder="연락처를 적어주세요!" required>
                                <p class="msg" id="youPhoneComment"><!--휴대폰 번호를 입력해주세요!--></p>
                            </div>
                            <div style="width:28%">
                                <label for="youGender">성별</label>
                                <select name="youGender" id="youGender" class="selectStyle" required>
                                    <option value="male">남자</option>
                                    <option value="female">여자</option>
                                </select>
                                <p class="msg" id="youGenderComment"><!--- * 성별을 설정해주세요---></p>
                            </div>
                        </div>
                        <div class="joinAgree mt20">
                            <div>
                                <input type="checkbox" class="agreeCheck" id="choice1" name="choice" value="1"><a id="modal-btn">이용약관 동의</a>  및  <a id="modal-btn2">개인정보 처리방침</a><span>  (필수)</span>
                            </div>
                            <div>
                                <input type="checkbox" id="choice1" name="choice" value="1"><em>마켓팅 수신 동의<span>  (선택)</span></em>
                            </div>
                        </div>
                        <div class="agreeMsg mt10" style="color:red"></div>
                        <button type="submit" class="agreeBtn btnStyle3 mt100">회원가입 완료</button>
                    </fieldset>
                </form>
            </div>
        </div>
    </main>
    
    <?php include "../include/footer.php"?>
    <!-- //footer -->
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
        $('#modal-btn').click(function(){
            $('.modal1').fadeIn()
        })
        $('.modal__close1').click(function(){
            $('.modal1').fadeOut();
        })
        $('#modal-btn2').click(function(){
            $('.modal2').fadeIn()
        })
        $('.modal__close2').click(function(){
            $('.modal2').fadeOut();
        })
    </script>
    <!-- 모달 -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        let isEmailCheck = false;
        let isIdCheck = false;
        let isNickCheck = false;

        function idChecking() {
            let youId = $("#youId").val();

            if (youId == null || youId == '') {
                $("#youIdComment").text("* 아이디를 입력해주세요");
            } else {
                // 아이디 유효성 검사
                if ($("#youId").val() == '') {
                    $("#youIdComment").text("* 아이디를 입력해주세요!");
                    $("#youId").focus();
                    return false;
                }
                let getYouId = RegExp(/^[a-zA-Z0-9_-]{4,16}$/);

                if (!getYouId.test($("#youId").val())) {
                    $("#youIdComment").text("*영어와 숫자를 포함하여 4~16글자 이내로 작성해주세요!");
                    $("#youId").val('');
                    $("#youId").focus();
                    return false;
                }

                $.ajax({
                    type: "POST",
                    url: "joinCheck.php",
                    data: { "youId": youId, "type": "isIdCheck" },
                    dataType: "json",
                    success: function (data) {
                        if (data.result == "good") {
                            $("#youIdComment").text("* 사용 가능한 아이디 입니다");
                            isIdCheck = true;
                            // joinChecks(); // 중복 확인이 완료되면 회원가입 검증 함수 호출
                        } else {
                            $("#youIdComment").text("* 이미 존재하는 아이디 입니다");
                            isIdCheck = false;
                        }
                    },
                    error: function (request, status, error) {
                        console.log("request" + request);
                        console.log("status" + status);
                        console.log("error" + error);
                    }
                })
            }
        }

        function emailChecking(){
            let youEmail = $("#youEmail").val();

            if(youEmail == null || youEmail == ''){
                $("#youEmailComment").text("* 이메일을 입력해주세요");
            } else {
                // 이메일 유효성 검사
                if($("#youEmail").val() == ''){
                    $("#youEmailComment").text("* 이메일을 입력해주세요!");
                    $("#youEmail").focus();
                    return false;
                }
                let getYouEmail = RegExp(/^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i);
                
                if(!getYouEmail.test($("#youEmail").val())){
                    $("#youEmailComment").text("* 이메일 형식에 맞게 작성해주세요!");
                    $("#youEmail").val('');
                    $("#youEmail").focus();
                    return false;
                }

                $.ajax({
                    type : "POST",
                    url : "joinCheck.php",
                    data : {"youEmail" : youEmail, "type" : "isEmailCheck"},
                    dataType : "json",
                    success : function(data){
                        if(data.result == "good"){
                            $("#youEmailComment").text("* 사용 가능한 이메일 입니다");
                            isEmailCheck = true;
                        } else {
                            $("#youEmailComment").text("* 이미 존재하는 이메일 입니다");
                            isEmailCheck = false;
                        }
                    },
                    error : function(request, status, error){
                        console.log("request" + request);
                        console.log("status" + status);
                        console.log("error" + error);
                    }
                })
            }
        }

        function nickChecking(){
            let youNick = $("#youNick").val();
            
            if(youNick == null || youNick ==''){
                $("#youNickComment").text("* 닉네임을 입력해주세요!");
                $("#youPass").focus();
                return false;
            } else {
                // 닉네임 유효성 검사
                if($("#youNick").val() == ''){
                    $("#youNickComment").text("* 닉네임을 입력해주세요!");
                    $("#youNick").focus();
                    return false;
                }
                let getYouNick = RegExp(/^[가-힣|0-9]+$/);
                if(!getYouNick.test($("#youNick").val())){
                    $("#youNickComment").text("* 닉네임은 한글 또는 숫자만 사용 가능합니다.");
                    $("#youNick").val('');
                    $("#youNick").focus();
                    return false;
                }
                $.ajax({
                    type: "POST",
                    url : "joinCheck.php",
                    data: {"youNick" : youNick, "type" : "isNickCheck"},
                    dataType : "json",
                    success : function(data){
                        if(data.result == "good"){
                            $("#youNickComment").text("* 사용 가능한 닉네임 입니다");
                            isNickCheck = true;
                        } else {
                            $("#youNickComment").text("* 이미 존재하는 닉네임 입니다");
                            isNickCheck = false;
                        }
                    },
                    error : function(request, status, error){
                        console.log("request" + request);
                        console.log("status" + status);
                        console.log("error" + error);
                    }
                })
            }
        }


        function joinChecks(){
            // 중복 확인이 이루어졌는지 검사
            if (!isEmailCheck || !isIdCheck || !isNickCheck) {
                alert("중복 확인 먼저 진행해주세요.");
                return false;
            }
            // 이름 유효성 검사
            if($("#youName").val() == ''){
                $("#youNameComment").text("* 이름을 입력해주세요!");
                $("#youName").focus();
                return false;
            }
            let getYouName = RegExp(/^[가-힣]+$/);
            if(!getYouName.test($("#youName").val())){
                $("#youNameComment").text("* 이름은 한글만 사용 가능합니다!");
                $("#youName").val('');
                $("#youName").focus();
                return false;
            }

            // 비밀번호 유효성 검사
            if($("#youPass").val() == ''){
                $("#youPassComment").text("* 비밀번호를 입력해주세요!");
                $("#youPass").focus();
                return false;
            }

            // 8~20자 이내, 공백X, 영문, 숫자, 특수기호
            let getYouPass = $("#youPass").val();
            let getYouPassNum = getYouPass.search(/[0-9]/g);
            let getYouPassEng = getYouPass.search(/[a-z]/ig);
            let getYouPassSpe = getYouPass.search(/[`~!@@#$%^&*|₩₩₩'₩";:₩/?]/gi);
            if(getYouPass.length < 8 || getYouPass.length > 20){
                $("#youPassComment").text("* 8자리 ~ 20자리 이내로 입력해주세요~");
                return false;
            } else if (getYouPass.search(/\s/) != -1){
                $("#youPassComment").text("* 비밀번호는 공백없이 입력해주세요!");
                return false;
            } else if (getYouPassNum < 0 || getYouPassEng < 0 || getYouPassSpe < 0 ){
                $("#youPassComment").text("* 영문, 숫자, 특수문자를 혼합하여 입력해주세요!");
                return false;
            }

            // 비밀번호 확인 유효성 검사
            if($("#youPassC").val() == ''){
                $("#youPassCComment").text("* 확인 비밀번호를 입력해주세요!");
                $("#youPassC").focus();
                return false;
            }

            // 비밀번호 동일한지 체크
            if($("#youPass").val() !== $("#youPassC").val()){
                $("#youPassCComment").text("* 비밀번호가 일치하지 않습니다.");
                $("#youPass").focus();
                return false;
            }

            // 연락처 유효성 검사
            if($("#youPhone").val() == ''){
                $("#youPhoneComment").text("* 연락처를 입력해주세요!");
                $("#youPhone").focus();
                return false;
            }
            let getYouPhone = RegExp(/01[016789]-[^0][0-9]{2,3}-[0-9]{3,4}/);
            if(!getYouPhone.test($("#youPhone").val())){
                $("#youPhoneComment").text("* 휴대폰 번호가 정확하지 않습니다.(000-0000-000)");
                $("#youPhone").val('');
                $("#youPhone").focus();
                return false;
            }
        }
        

        // 체크 표시 검사
        const agreeBtn = document.querySelector(".agreeBtn");
        const agreeCheck = document.querySelectorAll(".agreeCheck");
        const agreeMsg = document.querySelector(".agreeMsg");

        agreeBtn.addEventListener("click", (e) => {
            
            agreeCheck.forEach((check) => {
                if(check.checked == false){
                    agreeMsg.innerText = "* 체크박스를 다시 한 번 확인해주세요!";
                    
                    e.preventDefault();
                }
            });
        })



        function scrollToCenter(element) {
            const offsetTop = element.offsetTop;
            const windowHeight = window.innerHeight;
            const scrollPosition = offsetTop - (windowHeight / 2);
            
            window.scrollTo({
                top: scrollPosition,
                behavior: 'smooth'
            });
        }

        // 아이디 필드에 포커스가 이동할 때 중앙으로 스크롤
        const youIdInput = document.getElementById('youId');
            youIdInput.addEventListener('focus', function() {
            scrollToCenter(youIdInput);
        });

        // 이름 필드에 포커스가 이동할 때 중앙으로 스크롤
        const youNameInput = document.getElementById('youName');
            youNameInput.addEventListener('focus', function() {
            scrollToCenter(youNameInput);
        });

        // 비밀번호 필드에 포커스가 이동할 때 중앙으로 스크롤
        const youPassInput = document.getElementById('youPass');
            youPassInput.addEventListener('focus', function() {
            scrollToCenter(youPassInput);
        });

        // 비밀번호 확인 필드에 포커스가 이동할 때 중앙으로 스크롤
        const youPassCInput = document.getElementById('youPassC');
            youPassCInput.addEventListener('focus', function() {
            scrollToCenter(youPassCInput);
        });

        // 이메일 필드에 포커스가 이동할 때 중앙으로 스크롤
        const youEmailInput = document.getElementById('youEmail');
            youEmailInput.addEventListener('focus', function() {
            scrollToCenter(youEmailInput);
        });

        // 닉네임에 포커스가 이동할 때 중앙으로 스크롤
        const youNickInput = document.getElementById('youNick');
            youNickInput.addEventListener('focus', function() {
            scrollToCenter(youNickInput);
        });
    </script>
</body>
</html>